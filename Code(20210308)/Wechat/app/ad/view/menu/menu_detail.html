{extend name="base/common"}
{block name="body"}

<div class="right_col" role="main">
  <div class="clearfix">
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2> 自定义菜单 <small> 一级自定菜单 </small></h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <br />
            <form id="demo-form2" method="post" data-parsley-validate class="form-horizontal form-label-left">

              <input type="hidden" name="id">

              <div class="form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="menuName"> 菜单名称 </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="menuName" name="menuName" required="required" class="form-control col-md-7 col-xs-12" placeholder="必填" value="{$menu.name}">
                </div>
              </div>
              <input id="menu_type" value="{$menu.type}" hidden />

              <div class="form-group" id="url">
                <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12"> 菜单类型 </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select  id="menuType1" name="menuType" onchange="selectType1()"  class="form-control col-md-7 col-xs-12" >
                    <option value="{$menu.type}">{$menu.type}</option>
                    <option value="URL">URL</option>
                    <option value="KEY">KEY</option>
                  </select>
                </div>
              </div>

              <!--  <div class="form-group" id="key">
                <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12"> 菜单类型 </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select  id="menuType" name="menuType" onchange="selectType()"  class="form-control col-md-7 col-xs-12" >
                    <option value="{$menu.type}">{$menu.type}</option>
                    <option value="URL">URL</option>
                    <option value="KEY">KEY</option>
                  </select>
                </div>
              </div> -->

             <!--  <div class="form-group" id="urlValue">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="URL">URL VALUE </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input  onblur="Url()" type="text" id="menuValue" name="menuValue" required="required" class="form-control col-md-7 col-xs-12" placeholder="必填" value="{$menu.value}">
                </div>
              </div> -->

             

              <div class="form-group" id="keyValue">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="URL"> VALUE </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="menuValueKey" name="menuValueKey"  class="form-control col-md-7 col-xs-12" placeholder="必填" value="{$menu.value}">
                </div>
              </div>

               <div class="form-group" id="urlValue">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="URL"> VALUE </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" onchange="Url()" id="menuValue" name="menuValue"  class="form-control col-md-7 col-xs-12" placeholder="必填" value="{$menu.value}">
                </div>
              </div>


              

              <div class="form-group">
                <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12"> 优先级 </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select  id="menuPosition" name="menuPosition" class="form-control col-md-7 col-xs-12">
                    <option value="{$menu.position}">{$menu.position_name}</option>
                     {volist name="diff_menu_dat" id="vo" }
                    <option value="{$vo.position}">{$vo.position_name}</option>
                    {/volist}
                  </select>
                </div>
              </div>

              <input type="hidden" name="id" value="{$menu.id}">
              <input type="hidden" name="mid" value="{$menu.mid}">

              <div class="ln_solid"></div>
              <div class="form-group">
                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                  <button class="btn btn-primary" type="button" id="btn-back"> 返回 </button>
                  <button class="btn btn-primary" type="reset">  重置 </button>
                  <button class="btn btn-success" type="submit" id="btn-sub"> 提交 </button>
                </div>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="row tile_count">
    <div class="tile_stats_count">
      <div class="count"><small>二级菜单</small></div>
    </div>
    <div class="x_content">
      <div class="col-xs-8" style="float: left;">
        <!-- <a href="#" data-toggle="popover" title="删除选定的访客信息">
          <button type="button" class="btn btn-danger"  id="menu-del"      > 删除选定自定义菜单 </button>
        </a>
        <a href="#" data-toggle="popover" title="清空所有的自定义菜单信息">
          <button type="button" class="btn btn-danger" id="menu-delete-all"> 清空所有自定义菜单 </button>
        </a> -->
        <a href="{:url('menu/menuAdd2',array('id'=>$menu['id']))}" data-toggle="popover" title="添加自定义菜单信息">
          <button type="button" class="btn btn-success" id="menu-export"   > 添加二级自定义菜单 </button>
        </a> 
        <!-- <a href="{:url('user/employeeAdd')}" data-toggle="popover" title="手动单个添加员工信息">
          <button type="button" class="btn btn-warning">新增员工信息</button>
        </a> -->
      </div>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-striped jambo_table bulk_action">
      <thead>
        <tr class="headings">
          <th><input type="checkbox" id="check-al" class="flat"></th>
          <th class="column-title"> 菜单名称 </th>
          <th class="column-title"> 菜单类型 </th>
          <th class="column-title"> 菜单位置 </th>
          <th class="column-title no-link last"><span class="nobr"> 操作 </span></th>
          <th class="bulk-actions" colspan="7">
            <a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions ( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a>
            </th>
        </tr>
      </thead>

      <tbody>
        {volist name="lst" id="vo2" mod="2"}
        <tr class="">
        

          <td class="a-center ">
            <input type="checkbox" class="flat" name="table_records" value="{$vo2.id}">
          </td>

          <td class=" "> {$vo2.name} </td>
          
          <td class=" "> {$vo2.type} </td>

          <td class=" "> {$vo2.position_name} </td>
  

          <td class=" last">
            <a href="{:url('menu/menuDetail2',array('id'=>$vo2['id']))}" data-toggle="popover" title="编辑访客信息"> 编辑 </a>
            <a href="{:url('menu/menuDel',array('id'=>$vo2['id']))}"    data-toggle="popover" title="删除访客信息"> 删除 </a>
          </td>
        </tr>
        {/volist}

      </tbody>
      </table>
    </div>
    
</div>
{/block}
{block name="js"}
<script src="__PUBLIC__/static/ad/js/user_visitordetail.js"></script>
<script type="text/javascript">

        $(document).ready(function(){ 
        if(document.getElementById("menu_type").value=='URL')
          {
            $("#keyValue").addClass("hidden");
            $("#urlValue").removeClass("hidden");
            // $("#url").removeClass("hidden");
            // $("#key").addClass("hidden");
          }else{
            $("#urlValue").addClass("hidden");
            $("#keyValue").removeClass("hidden");
            // $("#key").removeClass("hidden");
            // $("#url").addClass("hidden");
          }
      });

      function Url() {
      
                  var menuValue = document.getElementById("menuValue").value; //获取你所填写的信息
                  var menuValueReg = /^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*([\?&]\w+=\w*)*$/;  //定义约束
                  if (!menuValueReg.test(menuValue)) {   //判断
                     alert("网址输入错误");
                      return false;
                  }
                  else {
                      // alert("网址输入正确");
                      return true;
                  }
              }

     // function selectType() {
     //            var v  = document.getElementById("menuType").value;
     //            // alert(v);
     //            if(v=="KEY"){
     //              // alert("k");
     //              $("#keyValue").removeClass("hidden");
     //              $("#urlValue").addClass("hidden");
     //            }                  
     //            else{
     //              // alert("u");
     //              $("#keyValue").addClass("hidden");
     //              $("#urlValue").removeClass("hidden");
     //            }
     //        };

     function selectType1() {
                var v  = document.getElementById("menuType1").value;
                // alert(v);
                if(v=="KEY"){
                  // alert("k");
                  $("#keyValue").removeClass("hidden");
                  $("#urlValue").addClass("hidden");
                }                  
                else{
                  // alert("u");
                  $("#keyValue").addClass("hidden");
                  $("#urlValue").removeClass("hidden");
                }
            };

        // $('#menuType').change(function(){ 
        //   alert("1111");
        //   var r  = document.getElementById("menuType").value;
        //           alert(r);
        // });


</script>
{/block}
